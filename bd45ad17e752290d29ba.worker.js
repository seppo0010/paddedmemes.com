(()=>{var t={637(t,e,n){t=n.nmd(t);var r="__lodash_hash_undefined__",o=1/0,i=9007199254740991,s="[object Arguments]",u="[object Array]",c="[object Boolean]",a="[object Date]",h="[object Error]",l="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object Promise]",m="[object RegExp]",_="[object Set]",v="[object String]",D="[object Symbol]",F="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/,E=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,x=/\\(\\)?/g,S=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,O={};O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O[s]=O[u]=O[y]=O[c]=O[b]=O[a]=O[h]=O[l]=O[d]=O[f]=O[p]=O[m]=O[_]=O[v]=O[F]=!1;var z="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,I="object"==typeof self&&self&&self.Object===Object&&self,M=z||I||Function("return this")(),k=e&&!e.nodeType&&e,B=k&&t&&!t.nodeType&&t,V=B&&B.exports===k&&z.process,T=function(){try{return V&&V.binding("util")}catch(t){}}(),L=T&&T.isTypedArray;function P(t,e){return!!(t?t.length:0)&&function(t,e,n){if(e!==e)return function(t,e,n,r){var o=t.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,N,n);var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,0)>-1}function R(t,e,n){for(var r=-1,o=t?t.length:0;++r<o;)if(n(e,t[r]))return!0;return!1}function W(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}function N(t){return t!==t}function J(t,e){return t.has(e)}function q(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function $(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Q(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var U,G,K=Array.prototype,Y=Function.prototype,H=Object.prototype,X=M["__core-js_shared__"],Z=function(){var t=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),tt=Y.toString,et=H.hasOwnProperty,nt=H.toString,rt=RegExp("^"+tt.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=M.Symbol,it=M.Uint8Array,st=H.propertyIsEnumerable,ut=K.splice,ct=(U=Object.keys,G=Object,function(t){return U(G(t))}),at=Rt(M,"DataView"),ht=Rt(M,"Map"),lt=Rt(M,"Promise"),dt=Rt(M,"Set"),ft=Rt(M,"WeakMap"),pt=Rt(Object,"create"),gt=Gt(at),mt=Gt(ht),_t=Gt(lt),vt=Gt(dt),Dt=Gt(ft),Ft=ot?ot.prototype:void 0,yt=Ft?Ft.valueOf:void 0,bt=Ft?Ft.toString:void 0;function wt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function At(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Et(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ct(t){var e=-1,n=t?t.length:0;for(this.__data__=new Et;++e<n;)this.add(t[e])}function xt(t){this.__data__=new At(t)}function St(t,e){var n=Xt(t)||Ht(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,o=!!r;for(var i in t)!e&&!et.call(t,i)||o&&("length"==i||Nt(i,r))||n.push(i);return n}function jt(t,e){for(var n=t.length;n--;)if(Yt(t[n][0],e))return n;return-1}function Ot(t,e){for(var n=0,r=(e=Jt(e,t)?[e]:Vt(e)).length;null!=t&&n<r;)t=t[Ut(e[n++])];return n&&n==r?t:void 0}function zt(t,e){return null!=t&&e in Object(t)}function It(t,e,n,r,o){return t===e||(null==t||null==e||!ne(t)&&!re(e)?t!==t&&e!==e:function(t,e,n,r,o,i){var l=Xt(t),g=Xt(e),F=u,w=u;l||(F=(F=Wt(t))==s?p:F);g||(w=(w=Wt(e))==s?p:w);var A=F==p&&!q(t),E=w==p&&!q(e),C=F==w;if(C&&!A)return i||(i=new xt),l||ie(t)?Lt(t,e,n,r,o,i):function(t,e,n,r,o,i,s){switch(n){case b:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y:return!(t.byteLength!=e.byteLength||!r(new it(t),new it(e)));case c:case a:case f:return Yt(+t,+e);case h:return t.name==e.name&&t.message==e.message;case m:case v:return t==e+"";case d:var u=$;case _:var l=2&i;if(u||(u=Q),t.size!=e.size&&!l)return!1;var p=s.get(t);if(p)return p==e;i|=1,s.set(t,e);var g=Lt(u(t),u(e),r,o,i,s);return s.delete(t),g;case D:if(yt)return yt.call(t)==yt.call(e)}return!1}(t,e,F,n,r,o,i);if(!(2&o)){var x=A&&et.call(t,"__wrapped__"),S=E&&et.call(e,"__wrapped__");if(x||S){var j=x?t.value():t,O=S?e.value():e;return i||(i=new xt),n(j,O,r,o,i)}}if(!C)return!1;return i||(i=new xt),function(t,e,n,r,o,i){var s=2&o,u=se(t),c=u.length,a=se(e),h=a.length;if(c!=h&&!s)return!1;var l=c;for(;l--;){var d=u[l];if(!(s?d in e:et.call(e,d)))return!1}var f=i.get(t);if(f&&i.get(e))return f==e;var p=!0;i.set(t,e),i.set(e,t);var g=s;for(;++l<c;){var m=t[d=u[l]],_=e[d];if(r)var v=s?r(_,m,d,e,t,i):r(m,_,d,t,e,i);if(!(void 0===v?m===_||n(m,_,r,o,i):v)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var D=t.constructor,F=e.constructor;D==F||!("constructor"in t)||!("constructor"in e)||"function"==typeof D&&D instanceof D&&"function"==typeof F&&F instanceof F||(p=!1)}return i.delete(t),i.delete(e),p}(t,e,n,r,o,i)}(t,e,It,n,r,o))}function Mt(t){return!(!ne(t)||function(t){return!!Z&&Z in t}(t))&&(te(t)||q(t)?rt:S).test(Gt(t))}function kt(t){return"function"==typeof t?t:null==t?ue:"object"==typeof t?Xt(t)?function(t,e){if(Jt(t)&&qt(e))return $t(Ut(t),e);return function(n){var r=function(t,e,n){var r=null==t?void 0:Ot(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?function(t,e){return null!=t&&function(t,e,n){e=Jt(e,t)?[e]:Vt(e);var r,o=-1,i=e.length;for(;++o<i;){var s=Ut(e[o]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}if(r)return r;i=t?t.length:0;return!!i&&ee(i)&&Nt(s,i)&&(Xt(t)||Ht(t))}(t,e,zt)}(n,t):It(e,r,void 0,3)}}(t[0],t[1]):function(t){var e=function(t){var e=se(t),n=e.length;for(;n--;){var r=e[n],o=t[r];e[n]=[r,o,qt(o)]}return e}(t);if(1==e.length&&e[0][2])return $t(e[0][0],e[0][1]);return function(n){return n===t||function(t,e,n,r){var o=n.length,i=o,s=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var c=(u=n[o])[0],a=t[c],h=u[1];if(s&&u[2]){if(void 0===a&&!(c in t))return!1}else{var l=new xt;if(r)var d=r(a,h,c,t,e,l);if(!(void 0===d?It(h,a,r,3,l):d))return!1}}return!0}(n,t,e)}}(t):function(t){return Jt(t)?(e=Ut(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Ot(e,t)}}(t);var e}(t)}function Bt(t){if(!function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||H;return t===n}(t))return ct(t);var e=[];for(var n in Object(t))et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Vt(t){return Xt(t)?t:Qt(t)}wt.prototype.clear=function(){this.__data__=pt?pt(null):{}},wt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},wt.prototype.get=function(t){var e=this.__data__;if(pt){var n=e[t];return n===r?void 0:n}return et.call(e,t)?e[t]:void 0},wt.prototype.has=function(t){var e=this.__data__;return pt?void 0!==e[t]:et.call(e,t)},wt.prototype.set=function(t,e){return this.__data__[t]=pt&&void 0===e?r:e,this},At.prototype.clear=function(){this.__data__=[]},At.prototype.delete=function(t){var e=this.__data__,n=jt(e,t);return!(n<0)&&(n==e.length-1?e.pop():ut.call(e,n,1),!0)},At.prototype.get=function(t){var e=this.__data__,n=jt(e,t);return n<0?void 0:e[n][1]},At.prototype.has=function(t){return jt(this.__data__,t)>-1},At.prototype.set=function(t,e){var n=this.__data__,r=jt(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Et.prototype.clear=function(){this.__data__={hash:new wt,map:new(ht||At),string:new wt}},Et.prototype.delete=function(t){return Pt(this,t).delete(t)},Et.prototype.get=function(t){return Pt(this,t).get(t)},Et.prototype.has=function(t){return Pt(this,t).has(t)},Et.prototype.set=function(t,e){return Pt(this,t).set(t,e),this},Ct.prototype.add=Ct.prototype.push=function(t){return this.__data__.set(t,r),this},Ct.prototype.has=function(t){return this.__data__.has(t)},xt.prototype.clear=function(){this.__data__=new At},xt.prototype.delete=function(t){return this.__data__.delete(t)},xt.prototype.get=function(t){return this.__data__.get(t)},xt.prototype.has=function(t){return this.__data__.has(t)},xt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof At){var r=n.__data__;if(!ht||r.length<199)return r.push([t,e]),this;n=this.__data__=new Et(r)}return n.set(t,e),this};var Tt=dt&&1/Q(new dt([,-0]))[1]==o?function(t){return new dt(t)}:function(){};function Lt(t,e,n,r,o,i){var s=2&o,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var a=i.get(t);if(a&&i.get(e))return a==e;var h=-1,l=!0,d=1&o?new Ct:void 0;for(i.set(t,e),i.set(e,t);++h<u;){var f=t[h],p=e[h];if(r)var g=s?r(p,f,h,e,t,i):r(f,p,h,t,e,i);if(void 0!==g){if(g)continue;l=!1;break}if(d){if(!W(e,function(t,e){if(!d.has(e)&&(f===t||n(f,t,r,o,i)))return d.add(e)})){l=!1;break}}else if(f!==p&&!n(f,p,r,o,i)){l=!1;break}}return i.delete(t),i.delete(e),l}function Pt(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Rt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(n)?n:void 0}var Wt=function(t){return nt.call(t)};function Nt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||j.test(t))&&t>-1&&t%1==0&&t<e}function Jt(t,e){if(Xt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!oe(t))||(A.test(t)||!w.test(t)||null!=e&&t in Object(e))}function qt(t){return t===t&&!ne(t)}function $t(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}(at&&Wt(new at(new ArrayBuffer(1)))!=b||ht&&Wt(new ht)!=d||lt&&Wt(lt.resolve())!=g||dt&&Wt(new dt)!=_||ft&&Wt(new ft)!=F)&&(Wt=function(t){var e=nt.call(t),n=e==p?t.constructor:void 0,r=n?Gt(n):void 0;if(r)switch(r){case gt:return b;case mt:return d;case _t:return g;case vt:return _;case Dt:return F}return e});var Qt=Kt(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(oe(t))return bt?bt.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return E.test(t)&&n.push(""),t.replace(C,function(t,e,r,o){n.push(r?o.replace(x,"$1"):e||t)}),n});function Ut(t){if("string"==typeof t||oe(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Gt(t){if(null!=t){try{return tt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Kt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s),s};return n.cache=new(Kt.Cache||Et),n}function Yt(t,e){return t===e||t!==t&&e!==e}function Ht(t){return function(t){return re(t)&&Zt(t)}(t)&&et.call(t,"callee")&&(!st.call(t,"callee")||nt.call(t)==s)}Kt.Cache=Et;var Xt=Array.isArray;function Zt(t){return null!=t&&ee(t.length)&&!te(t)}function te(t){var e=ne(t)?nt.call(t):"";return e==l||"[object GeneratorFunction]"==e}function ee(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function ne(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function re(t){return!!t&&"object"==typeof t}function oe(t){return"symbol"==typeof t||re(t)&&nt.call(t)==D}var ie=L?function(t){return function(e){return t(e)}}(L):function(t){return re(t)&&ee(t.length)&&!!O[nt.call(t)]};function se(t){return Zt(t)?St(t):Bt(t)}function ue(t){return t}t.exports=function(t,e){return t&&t.length?function(t,e,n){var r=-1,o=P,i=t.length,s=!0,u=[],c=u;if(n)s=!1,o=R;else if(i>=200){var a=e?null:Tt(t);if(a)return Q(a);s=!1,o=J,c=new Ct}else c=e?[]:u;t:for(;++r<i;){var h=t[r],l=e?e(h):h;if(h=n||0!==h?h:0,s&&l===l){for(var d=c.length;d--;)if(c[d]===l)continue t;e&&c.push(l),u.push(h)}else o(c,l,n)||(c!==u&&c.push(l),u.push(h))}return u}(t,kt(e)):[]}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r](i,i.exports,n),i.loaded=!0,i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}function o(t,n,r){return(n=e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n.d(r,{autoSuggest:()=>nt,init:()=>tt,search:()=>et});var u=n(637),c=n.n(u);const a="KEYS",h="VALUES",l="";class d{constructor(t,e){const n=t._tree,r=Array.from(n.keys());this.set=t,this._type=e,this._path=r.length>0?[{node:n,keys:r}]:[]}next(){const t=this.dive();return this.backtrack(),t}dive(){if(0===this._path.length)return{done:!0,value:void 0};const{node:t,keys:e}=f(this._path);if(f(e)===l)return{done:!1,value:this.result()};const n=t.get(f(e));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(0===this._path.length)return;const t=f(this._path).keys;t.pop(),t.length>0||(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(t=>{let{keys:e}=t;return f(e)}).filter(t=>t!==l).join("")}value(){return f(this._path).node.get(l)}result(){switch(this._type){case h:return this.value();case a:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const f=t=>t[t.length-1],p=(t,e,n,r,o,i,s,u)=>{const c=i*s;t:for(const a of t.keys())if(a===l){const e=o[c-1];e<=n&&r.set(u,[t.get(a),e])}else{let c=i;for(let t=0;t<a.length;++t,++c){const r=a[t],i=s*c,u=i-s;let h=o[i];const l=Math.max(0,c-n-1),d=Math.min(s-1,c+n);for(let t=l;t<d;++t){const n=r!==e[t],s=o[u+t]+ +n,c=o[u+t+1]+1,a=o[i+t]+1,l=o[i+t+1]=Math.min(s,c,a);l<h&&(h=l)}if(h>n)continue t}p(t.get(a),e,n,r,o,c,s,u+a)}};class g{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._size=void 0,this._tree=t,this._prefix=e}atPrefix(t){if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");const[e,n]=m(this._tree,t.slice(this._prefix.length));if(void 0===e){const[e,r]=b(n);for(const n of e.keys())if(n!==l&&n.startsWith(r)){const o=new Map;return o.set(n.slice(r.length),e.get(n)),new g(o,t)}}return new g(e,t)}clear(){this._size=void 0,this._tree.clear()}delete(t){return this._size=void 0,D(this._tree,t)}entries(){return new d(this,"ENTRIES")}forEach(t){for(const[e,n]of this)t(e,n,this)}fuzzyGet(t,e){return((t,e,n)=>{const r=new Map;if(void 0===e)return r;const o=e.length+1,i=o+n,s=new Uint8Array(i*o).fill(n+1);for(let u=0;u<o;++u)s[u]=u;for(let u=1;u<i;++u)s[u*o]=u;return p(t,e,n,r,s,1,o,""),r})(this._tree,t,e)}get(t){const e=_(this._tree,t);return void 0!==e?e.get(l):void 0}has(t){const e=_(this._tree,t);return void 0!==e&&e.has(l)}keys(){return new d(this,a)}set(t,e){if("string"!==typeof t)throw new Error("key must be a string");this._size=void 0;return v(this._tree,t).set(l,e),this}get size(){if(this._size)return this._size;this._size=0;const t=this.entries();for(;!t.next().done;)this._size+=1;return this._size}update(t,e){if("string"!==typeof t)throw new Error("key must be a string");this._size=void 0;const n=v(this._tree,t);return n.set(l,e(n.get(l))),this}fetch(t,e){if("string"!==typeof t)throw new Error("key must be a string");this._size=void 0;const n=v(this._tree,t);let r=n.get(l);return void 0===r&&n.set(l,r=e()),r}values(){return new d(this,h)}[Symbol.iterator](){return this.entries()}static from(t){const e=new g;for(const[n,r]of t)e.set(n,r);return e}static fromObject(t){return g.from(Object.entries(t))}}const m=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===e.length||null==t)return[t,n];for(const r of t.keys())if(r!==l&&e.startsWith(r))return n.push([t,r]),m(t.get(r),e.slice(r.length),n);return n.push([t,e]),m(void 0,"",n)},_=(t,e)=>{if(0===e.length||null==t)return t;for(const n of t.keys())if(n!==l&&e.startsWith(n))return _(t.get(n),e.slice(n.length))},v=(t,e)=>{const n=e.length;t:for(let r=0;t&&r<n;){for(const i of t.keys())if(i!==l&&e[r]===i[0]){const o=Math.min(n-r,i.length);let s=1;for(;s<o&&e[r+s]===i[s];)++s;const u=t.get(i);if(s===i.length)t=u;else{const n=new Map;n.set(i.slice(s),u),t.set(e.slice(r,r+s),n),t.delete(i),t=n}r+=s;continue t}const o=new Map;return t.set(e.slice(r),o),o}return t},D=(t,e)=>{const[n,r]=m(t,e);if(void 0!==n)if(n.delete(l),0===n.size)F(r);else if(1===n.size){const[t,e]=n.entries().next().value;y(r,t,e)}},F=t=>{if(0===t.length)return;const[e,n]=b(t);if(e.delete(n),0===e.size)F(t.slice(0,-1));else if(1===e.size){const[n,r]=e.entries().next().value;n!==l&&y(t.slice(0,-1),n,r)}},y=(t,e,n)=>{if(0===t.length)return;const[r,o]=b(t);r.set(o+e,n),r.delete(o)},b=t=>t[t.length-1],w="or",A="and",E="and_not";class C{constructor(t){if(null==(null===t||void 0===t?void 0:t.fields))throw new Error('MiniSearch: option "fields" must be provided');const e=null==t.autoVacuum||!0===t.autoVacuum?V:t.autoVacuum;this._options=s(s(s({},z),t),{},{autoVacuum:e,searchOptions:s(s({},I),t.searchOptions||{}),autoSuggestOptions:s(s({},M),t.autoSuggestOptions||{})}),this._index=new g,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=B,this.addFields(this._options.fields)}add(t){const{extractField:e,stringifyField:n,tokenize:r,processTerm:o,fields:i,idField:s}=this._options,u=e(t,s);if(null==u)throw new Error('MiniSearch: document does not have ID field "'.concat(s,'"'));if(this._idToShortId.has(u))throw new Error("MiniSearch: duplicate ID ".concat(u));const c=this.addDocumentId(u);this.saveStoredFields(c,t);for(const a of i){const i=e(t,a);if(null==i)continue;const s=r(n(i,a),a),u=this._fieldIds[a],h=new Set(s).size;this.addFieldLength(c,u,this._documentCount-1,h);for(const t of s){const e=o(t,a);if(Array.isArray(e))for(const t of e)this.addTerm(u,c,t);else e&&this.addTerm(u,c,e)}}}addAll(t){for(const e of t)this.add(e)}addAllAsync(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chunkSize:n=10}=e,r={chunk:[],promise:Promise.resolve()},{chunk:o,promise:i}=t.reduce((t,e,r)=>{let{chunk:o,promise:i}=t;return o.push(e),(r+1)%n===0?{chunk:[],promise:i.then(()=>new Promise(t=>setTimeout(t,0))).then(()=>this.addAll(o))}:{chunk:o,promise:i}},r);return i.then(()=>this.addAll(o))}remove(t){const{tokenize:e,processTerm:n,extractField:r,stringifyField:o,fields:i,idField:s}=this._options,u=r(t,s);if(null==u)throw new Error('MiniSearch: document does not have ID field "'.concat(s,'"'));const c=this._idToShortId.get(u);if(null==c)throw new Error("MiniSearch: cannot remove document with ID ".concat(u,": it is not in the index"));for(const a of i){const i=r(t,a);if(null==i)continue;const s=e(o(i,a),a),u=this._fieldIds[a],h=new Set(s).size;this.removeFieldLength(c,u,this._documentCount,h);for(const t of s){const e=n(t,a);if(Array.isArray(e))for(const t of e)this.removeTerm(u,c,t);else e&&this.removeTerm(u,c,e)}}this._storedFields.delete(c),this._documentIds.delete(c),this._idToShortId.delete(u),this._fieldLength.delete(c),this._documentCount-=1}removeAll(t){if(t)for(const e of t)this.remove(e);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new g,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(t){const e=this._idToShortId.get(t);if(null==e)throw new Error("MiniSearch: cannot discard document with ID ".concat(t,": it is not in the index"));this._idToShortId.delete(t),this._documentIds.delete(e),this._storedFields.delete(e),(this._fieldLength.get(e)||[]).forEach((t,n)=>{this.removeFieldLength(e,n,this._documentCount,t)}),this._fieldLength.delete(e),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(!1===this._options.autoVacuum)return;const{minDirtFactor:t,minDirtCount:e,batchSize:n,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:r},{minDirtCount:e,minDirtFactor:t})}discardAll(t){const e=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const e of t)this.discard(e)}finally{this._options.autoVacuum=e}this.maybeAutoVacuum()}replace(t){const{idField:e,extractField:n}=this._options,r=n(t,e);this.discard(r),this.add(t)}vacuum(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.conditionalVacuum(t)}conditionalVacuum(t,e){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&e,null!=this._enqueuedVacuum||(this._enqueuedVacuum=this._currentVacuum.then(()=>{const e=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=B,this.performVacuuming(t,e)})),this._enqueuedVacuum):!1===this.vacuumConditionsMet(e)?Promise.resolve():(this._currentVacuum=this.performVacuuming(t),this._currentVacuum)}async performVacuuming(t,e){const n=this._dirtCount;if(this.vacuumConditionsMet(e)){const e=t.batchSize||k.batchSize,r=t.batchWait||k.batchWait;let o=1;for(const[t,n]of this._index){for(const[t,e]of n)for(const[r]of e)this._documentIds.has(r)||(e.size<=1?n.delete(t):e.delete(r));0===this._index.get(t).size&&this._index.delete(t),o%e===0&&await new Promise(t=>setTimeout(t,r)),o+=1}this._dirtCount-=n}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(t){if(null==t)return!0;let{minDirtCount:e,minDirtFactor:n}=t;return e=e||V.minDirtCount,n=n||V.minDirtFactor,this.dirtCount>=e&&this.dirtFactor>=n}get isVacuuming(){return null!=this._currentVacuum}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(t){return this._idToShortId.has(t)}getStoredFields(t){const e=this._idToShortId.get(t);if(null!=e)return this._storedFields.get(e)}search(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{searchOptions:n}=this._options,r=s(s({},n),e),o=this.executeQuery(t,e),i=[];for(const[s,{score:u,terms:c,match:a}]of o){const t=c.length||1,e={id:this._documentIds.get(s),score:u*t,terms:Object.keys(a),queryTerms:c,match:a};Object.assign(e,this._storedFields.get(s)),(null==r.filter||r.filter(e))&&i.push(e)}return t===C.wildcard&&null==r.boostDocument||i.sort(P),i}autoSuggest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=s(s({},this._options.autoSuggestOptions),e);const n=new Map;for(const{score:o,terms:i}of this.search(t,e)){const t=i.join(" "),e=n.get(t);null!=e?(e.score+=o,e.count+=1):n.set(t,{score:o,terms:i,count:1})}const r=[];for(const[o,{score:i,terms:s,count:u}]of n)r.push({suggestion:o,terms:s,score:i/u});return r.sort(P),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(t,e){if(null==e)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(t),e)}static async loadJSONAsync(t,e){if(null==e)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(t),e)}static getDefault(t){if(z.hasOwnProperty(t))return x(z,t);throw new Error('MiniSearch: unknown option "'.concat(t,'"'))}static loadJS(t,e){const{index:n,documentIds:r,fieldLength:o,storedFields:i,serializationVersion:s}=t,u=this.instantiateMiniSearch(t,e);u._documentIds=W(r),u._fieldLength=W(o),u._storedFields=W(i);for(const[c,a]of u._documentIds)u._idToShortId.set(a,c);for(const[c,a]of n){const t=new Map;for(const e of Object.keys(a)){let n=a[e];1===s&&(n=n.ds),t.set(parseInt(e,10),W(n))}u._index.set(c,t)}return u}static async loadJSAsync(t,e){const{index:n,documentIds:r,fieldLength:o,storedFields:i,serializationVersion:s}=t,u=this.instantiateMiniSearch(t,e);u._documentIds=await N(r),u._fieldLength=await N(o),u._storedFields=await N(i);for(const[a,h]of u._documentIds)u._idToShortId.set(h,a);let c=0;for(const[a,h]of n){const t=new Map;for(const e of Object.keys(h)){let n=h[e];1===s&&(n=n.ds),t.set(parseInt(e,10),await N(n))}++c%1e3===0&&await J(0),u._index.set(a,t)}return u}static instantiateMiniSearch(t,e){const{documentCount:n,nextId:r,fieldIds:o,averageFieldLength:i,dirtCount:s,serializationVersion:u}=t;if(1!==u&&2!==u)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const c=new C(e);return c._documentCount=n,c._nextId=r,c._idToShortId=new Map,c._fieldIds=o,c._avgFieldLength=i,c._dirtCount=s||0,c._index=new g,c}executeQuery(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t===C.wildcard)return this.executeWildcardQuery(e);if("string"!==typeof t){const n=s(s(s({},e),t),{},{queries:void 0}),r=t.queries.map(t=>this.executeQuery(t,n));return this.combineResults(r,n.combineWith)}const{tokenize:n,processTerm:r,searchOptions:o}=this._options,i=s(s({tokenize:n,processTerm:r},o),e),{tokenize:u,processTerm:c}=i,a=u(t).flatMap(t=>c(t)).filter(t=>!!t).map(O(i)).map(t=>this.executeQuerySpec(t,i));return this.combineResults(a,i.combineWith)}executeQuerySpec(t,e){const n=s(s({},this._options.searchOptions),e),r=(n.fields||this._options.fields).reduce((t,e)=>s(s({},t),{},{[e]:x(n.boost,e)||1}),{}),{boostDocument:o,weights:i,maxFuzzy:u,bm25:c}=n,{fuzzy:a,prefix:h}=s(s({},I.weights),i),l=this._index.get(t.term),d=this.termResults(t.term,t.term,1,t.termBoost,l,r,o,c);let f,p;if(t.prefix&&(f=this._index.atPrefix(t.term)),t.fuzzy){const e=!0===t.fuzzy?.2:t.fuzzy,n=e<1?Math.min(u,Math.round(t.term.length*e)):e;n&&(p=this._index.fuzzyGet(t.term,n))}if(f)for(const[s,g]of f){const e=s.length-t.term.length;if(!e)continue;null===p||void 0===p||p.delete(s);const n=h*s.length/(s.length+.3*e);this.termResults(t.term,s,n,t.termBoost,g,r,o,c,d)}if(p)for(const s of p.keys()){const[e,n]=p.get(s);if(!n)continue;const i=a*s.length/(s.length+n);this.termResults(t.term,s,i,t.termBoost,e,r,o,c,d)}return d}executeWildcardQuery(t){const e=new Map,n=s(s({},this._options.searchOptions),t);for(const[r,o]of this._documentIds){const t=n.boostDocument?n.boostDocument(o,"",this._storedFields.get(r)):1;e.set(r,{score:t,terms:[],match:{}})}return e}combineResults(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;if(0===t.length)return new Map;const n=e.toLowerCase(),r=S[n];if(!r)throw new Error("Invalid combination operator: ".concat(e));return t.reduce(r)||new Map}toJSON(){const t=[];for(const[e,n]of this._index){const r={};for(const[t,e]of n)r[t]=Object.fromEntries(e);t.push([e,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:t,serializationVersion:2}}termResults(t,e,n,r,o,i,s,u){let c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new Map;if(null==o)return c;for(const a of Object.keys(i)){const h=i[a],l=this._fieldIds[a],d=o.get(l);if(null==d)continue;let f=d.size;const p=this._avgFieldLength[l];for(const o of d.keys()){if(!this._documentIds.has(o)){this.removeTerm(l,o,e),f-=1;continue}const i=s?s(this._documentIds.get(o),e,this._storedFields.get(o)):1;if(!i)continue;const g=d.get(o),m=this._fieldLength.get(o)[l],_=n*r*h*i*j(g,f,this._documentCount,m,p,u),v=c.get(o);if(v){v.score+=_,T(v.terms,t);const n=x(v.match,e);n?n.push(a):v.match[e]=[a]}else c.set(o,{score:_,terms:[t],match:{[e]:[a]}})}}return c}addTerm(t,e,n){const r=this._index.fetch(n,R);let o=r.get(t);if(null==o)o=new Map,o.set(e,1),r.set(t,o);else{const t=o.get(e);o.set(e,(t||0)+1)}}removeTerm(t,e,n){if(!this._index.has(n))return void this.warnDocumentChanged(e,t,n);const r=this._index.fetch(n,R),o=r.get(t);null==o||null==o.get(e)?this.warnDocumentChanged(e,t,n):o.get(e)<=1?o.size<=1?r.delete(t):o.delete(e):o.set(e,o.get(e)-1),0===this._index.get(n).size&&this._index.delete(n)}warnDocumentChanged(t,e,n){for(const r of Object.keys(this._fieldIds))if(this._fieldIds[r]===e)return void this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(t),' has changed before removal: term "').concat(n,'" was not present in field "').concat(r,'". Removing a document after it has changed can corrupt the index!'),"version_conflict")}addDocumentId(t){const e=this._nextId;return this._idToShortId.set(t,e),this._documentIds.set(e,t),this._documentCount+=1,this._nextId+=1,e}addFields(t){for(let e=0;e<t.length;e++)this._fieldIds[t[e]]=e}addFieldLength(t,e,n,r){let o=this._fieldLength.get(t);null==o&&this._fieldLength.set(t,o=[]),o[e]=r;const i=(this._avgFieldLength[e]||0)*n+r;this._avgFieldLength[e]=i/(n+1)}removeFieldLength(t,e,n,r){if(1===n)return void(this._avgFieldLength[e]=0);const o=this._avgFieldLength[e]*n-r;this._avgFieldLength[e]=o/(n-1)}saveStoredFields(t,e){const{storeFields:n,extractField:r}=this._options;if(null==n||0===n.length)return;let o=this._storedFields.get(t);null==o&&this._storedFields.set(t,o={});for(const i of n){const t=r(e,i);void 0!==t&&(o[i]=t)}}}C.wildcard=Symbol("*");const x=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,S={[w]:(t,e)=>{for(const n of e.keys()){const r=t.get(n);if(null==r)t.set(n,e.get(n));else{const{score:t,terms:o,match:i}=e.get(n);r.score=r.score+t,r.match=Object.assign(r.match,i),L(r.terms,o)}}return t},[A]:(t,e)=>{const n=new Map;for(const r of e.keys()){const o=t.get(r);if(null==o)continue;const{score:i,terms:s,match:u}=e.get(r);L(o.terms,s),n.set(r,{score:o.score+i,terms:o.terms,match:Object.assign(o.match,u)})}return n},[E]:(t,e)=>{for(const n of e.keys())t.delete(n);return t}},j=(t,e,n,r,o,i)=>{const{k:s,b:u,d:c}=i;return Math.log(1+(n-e+.5)/(e+.5))*(c+t*(s+1)/(t+s*(1-u+u*r/o)))},O=t=>(e,n,r)=>({term:e,fuzzy:"function"===typeof t.fuzzy?t.fuzzy(e,n,r):t.fuzzy||!1,prefix:"function"===typeof t.prefix?t.prefix(e,n,r):!0===t.prefix,termBoost:"function"===typeof t.boostTerm?t.boostTerm(e,n,r):1}),z={idField:"id",extractField:(t,e)=>t[e],stringifyField:(t,e)=>t.toString(),tokenize:t=>t.split(q),processTerm:t=>t.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(t,e)=>{"function"===typeof(null===console||void 0===console?void 0:console[t])&&console[t](e)},autoVacuum:!0},I={combineWith:w,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:{k:1.2,b:.7,d:.5}},M={combineWith:"and",prefix:(t,e,n)=>e===n.length-1},k={batchSize:1e3,batchWait:10},B={minDirtFactor:.1,minDirtCount:20},V=s(s({},k),B),T=(t,e)=>{t.includes(e)||t.push(e)},L=(t,e)=>{for(const n of e)t.includes(n)||t.push(n)},P=(t,e)=>{let{score:n}=t,{score:r}=e;return r-n},R=()=>new Map,W=t=>{const e=new Map;for(const n of Object.keys(t))e.set(parseInt(n,10),t[n]);return e},N=async t=>{const e=new Map;let n=0;for(const r of Object.keys(t))e.set(parseInt(r,10),t[r]),++n%1e3===0&&await J(0);return e},J=t=>new Promise(e=>setTimeout(e,t)),q=/(?:[\n\r -#%-\*,-\/:;\?@\[-\]_\{\}\xA0\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDED0\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])+/;let $,Q=null,U="";const G="paddedmemes-v1",K="https://storage.googleapis.com/paddedmemes-assets";async function Y(t,e){const n=await caches.open(G),r="".concat(K,"/").concat(e),o="".concat(K,"/").concat(t),i=await fetch(r),s=i.ok?await i.json():null;if(s){const t=await n.match(r);if(t){if((await t.json()).hash===s.hash){const t=await n.match(o);if(t)return t.text()}}}const u=await fetch(o),c=new globalThis.DecompressionStream("gzip"),a=u.body.pipeThrough(c),h=await new Response(a).text();return await n.put(o,new Response(h)),s&&await n.put(r,new Response(JSON.stringify(s))),h}const H=()=>{if(!$)return;if(""===U.split(" ").filter(t=>t.length>=3).join(" "))return n.g.self.postMessage(["setDidSearch",!1]),void n.g.self.postMessage(["setSearchResults",[]]);const t=$.search(U);let e=t;if(Q){const n=Q.search(U),r=new Map;for(const e of t)r.set(e.photo,e);for(const t of n){const e=r.get(t.photo);e?e.score+=t.score:r.set(t.photo,s(s({},t),Z(t.photo)))}e=Array.from(r.values()).sort((t,e)=>e.score-t.score)}const r=e.filter((t,e,n)=>n.findIndex(e=>t.photo===e.photo)===e);n.g.self.postMessage(["setDidSearch",!0]),n.g.self.postMessage(["setSearchResults",r.slice(0,40)])};let X={};function Z(t){return X[t]||{}}async function tt(){const t=Y("db.json","db.version.json"),e=Y("descriptions.json","descriptions.version.json").catch(()=>null),[r,o]=await Promise.all([t,e]);$=C.loadJSON(r,{idField:"photo",fields:["text"],storeFields:["date_unixtime","photo","width","height"],searchOptions:{combineWith:"AND",prefix:!0}});const i=JSON.parse(r).storedFields;X={};for(const[,n]of Object.entries(i))X[n.photo]=n;o&&(Q=C.loadJSON(o,{idField:"photo",fields:["description"],storeFields:["photo","description_en","description_es"],searchOptions:{combineWith:"AND",prefix:!0}}));const s=c()(Object.values(i),t=>t.photo).sort((t,e)=>-parseInt(t.date_unixtime,10)+parseInt(e.date_unixtime,10)).slice(0,40);n.g.self.postMessage(["setReady",!0]),n.g.self.postMessage(["setDefaultResults",s]),H()}async function et(t){U=t,H()}async function nt(t){if(!$||t.trim().length<2)return void n.g.self.postMessage(["setSuggestions",[]]);const e={combineWith:"AND",prefix:!0},r=$.autoSuggest(t,e);let o=r;if(Q){const n=Q.autoSuggest(t,e),i=new Set(r.map(t=>t.suggestion));for(const t of n)i.has(t.suggestion)||o.push(t);o.sort((t,e)=>e.score-t.score)}n.g.self.postMessage(["setSuggestions",o.slice(0,5).map(t=>t.suggestion)])}addEventListener("message",function(t){var e,n=t.data,o=n.type,i=n.method,s=n.id,u=n.params;"RPC"===o&&i&&((e=r[i])?Promise.resolve().then(function(){return e.apply(r,u)}):Promise.reject("No such method")).then(function(t){postMessage({type:"RPC",id:s,result:t})}).catch(function(t){var e={message:t};t.stack&&(e.message=t.message,e.stack=t.stack,e.name=t.name),postMessage({type:"RPC",id:s,error:e})})}),postMessage({type:"RPC",method:"ready"})})()})();
//# sourceMappingURL=bd45ad17e752290d29ba.worker.js.map